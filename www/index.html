<!DOCTYPE html>
<html>

<head>
    <!--
        Customize this policy to fit your own app's needs. For more guidance, see:
            https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
        Some notes:
            * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
            * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
            * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
                * Enable inline JS: add 'unsafe-inline' to default-src
        -->
    <!--<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">-->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src * data:; 
        script-src 'self'
            http://connect.facebook.net/en_US/sdk.js 
            'unsafe-inline' 'unsafe-eval'; 
        frame-src * 
             http://staticxx.facebook.com/connect/
             https://www.facebook.com/ 'unsafe-inline' 'unsafe-eval';
        connect-src 'self' http://www.localhost:8000/ ws: http://zotime.ddns.net/ 'unsafe-inline' 'unsafe-eval'">

    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Your app title -->
    <title>PhotoDrop</title>

    <!-- This template defaults to the iOS CSS theme. To support both iOS and material design themes, see the Framework7 Tutorial at the link below:
        http://www.idangero.us/framework7/tutorials/maintain-both-ios-and-material-themes-in-single-app.html
     -->

    <!--<link rel="stylesheet" href="lib/framework7/css/framework7.ios.min.css">
    <link rel="stylesheet" href="lib/framework7/css/framework7.ios.colors.min.css">-->
    <link rel="stylesheet" href="lib/framework7/css/framework7.material.min.css">
    <link rel="stylesheet" href="lib/framework7/css/framework7.material.colors.min.css">


    <link rel="stylesheet" href="css/styles.css">
    <link href="css\material-icons.css" rel="stylesheet">
</head>

<body>
    <!-- Views -->
    <div class="views theme-teal">
        <!-- Your main view, should have "view-main" class -->
        <div class="view view-main">
            <!-- Pages container, because we use fixed-through navbar and toolbar, it has additional appropriate classes-->
            <!--<div class="pages navbar-through toolbar-through">-->
            <div class="pages">

                <!-- Page, "data-page" contains page name -->
                <div data-page="index" class="page">
                    <!-- swiper-init to initialize swiper automatically -->
                    <div class="swiper-container swiper-init" data-speed="400" data-space-between="40" data-pagination=".swiper-pagination" style="height:82%">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide">Slide 1</div>
                            <div class="swiper-slide">Slide 2</div>
                            <div class="swiper-slide">Slide 3</div>
                        </div>
                        <div class="swiper-pagination"></div>
                    </div>

                    <div class="list-block" style="position: absolute;bottom: 0;left: 0;width: 100%;margin-bottom: 5px;text-align:center">
                        <!--<div>-->
                        <a href="#login" class="button button-big button-raised" style="margin: auto;width: 90%;font-size: 30px;">Login</a>
                        <!--</div>
                        <div>-->
                        <a href="#signup" class="button button-big button-fill button-raised color-teal" style="width: 90%;margin: auto; margin-top:5px;font-size: 30px;">Signup</a>
                        <!--</div>-->
                    </div>

                </div>

                <!--Sign Up Page-->
                <div data-page="signup" class="page cached">
                    <!-- Top Navbar-->
                    <div class="navbar">
                        <div class="navbar-inner navbar-fixed">
                            <div class="left">
                                <a href="#index" class="link icon-only"><i class="icon icon-back back"></i></a>
                            </div>
                            <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                            <div class="center sliding">PhotoDrop</div>
                        </div>
                    </div>
                    <div class="page-content list-block">
                        <div class="content-block inset">
                            <form id="signup_form">
                                <ul>
                                    <li>
                                        <div class="item-content">
                                            <div class="item-inner">
                                                <div class="item-title floating-label">Email</div>
                                                <div class="item-input">
                                                    <input type="email" name="email">
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="item-content">
                                            <div class="item-inner">
                                                <div class="item-title floating-label">Username</div>
                                                <div class="item-input">
                                                    <input type="text" name="username">
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="item-content">
                                            <div class="item-inner">
                                                <div class="item-title floating-label">Password</div>
                                                <div class="item-input">
                                                    <input type="password" name="password">
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </form>
                        </div>
                    </div>
                    <!-- Toolbar has additional "toolbar-bottom" class -->
                    <div class="toolbar toolbar-bottom">
                        <a href="#" id="signup_link" class="link" style="float:right">Sign up</a>
                    </div>
                </div>

                <!--Login Page-->
                <div data-page="login" class="page cached">
                    <!-- Top Navbar-->
                    <div class="navbar">
                        <div class="navbar-inner navbar-fixed">
                            <div class="left">
                                <a href="#index" class="link icon-only"><i class="icon icon-back back"></i></a>
                            </div>
                            <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                            <div class="center sliding">PhotoDrop</div>
                        </div>
                    </div>
                    <div class="page-content list-block">
                        <div class="content-block list-block inset">
                            <form id="login_form">
                                <ul>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title floating-label">Username/Email</div>
                                            <div class="item-input">
                                                <input type="text" name="username">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title floating-label">Password</div>
                                            <div class="item-input">
                                                <input type="password" name="password">
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                            </form>
                        </div>
                    </div>
                    <!-- Toolbar has additional "toolbar-bottom" class -->
                    <div class="toolbar toolbar-bottom">
                        <a href="#" id="login_link" class="link" style="float:right">Log in</a>
                    </div>
                </div>

                <!--Home page-->
                <div data-page="home" class="page cached">
                    <!-- Top Navbar-->
                    <div class="navbar" style="height: 70px">
                        <!--<div id="profileBox" style="margin-right: 10px;float: right;margin-top: 10px;"> </div>-->
                        <div class="navbar-inner navbar-fixed">
                            <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                            <div class="center sliding">
                                <!--<div>PhotoDrop</div>-->
                            </div>

                            <div class="right">
                                <div id="profileBox" data-panel="right" data-popover=".popover-menu" class="open-popover" style="margin-right:5px;margin-top: 8px;">
                                    <div id="profPicThumb" style="float:right"></div>
                                    <div id="TFuserName" style="padding-right: 8px; float:left; padding-top:5px"></div>
                                </div>

                                <!-- Search Bar -->
                                <!--<form class="searchbar">
                                    <div class="searchbar-input">
                                        <input type="search">
                                        <a href="#" class="searchbar-clear"></a>
                                    </div>
                                    <a href="#" class="searchbar-cancel">Cancel</a>
                                </form>-->
                                <!-- Search Bar overlay-->
                                <!--<div class="searchbar-overlay"></div>-->

                            </div>
                        </div>
                    </div>
                    <!-- Floating Action Button -->
                    <a href="#" class="floating-button color-amber mainPG-fab" onclick="addAlbum()">
                        <i class="material-icons">add_to_photos</i>
                    </a>

                    <!-- User Menu popover -->
                    <div class="popover popover-menu">
                        <div class="popover-angle"></div>
                        <div class="popover-inner">
                            <div class="list-block">
                                <ul>
                                    <li><a href="#" class="list-button item-link close-popover" onclick="goToProfPg()">Profile</a></li>
                                    <li><a href="#friends" class="list-button item-link close-popover">Friends</a></li>
                                    <li><a href="#user-search" class="list-button item-link close-popover">User Search</a></li>
                                    <li><a href="#index" class="list-button item-link close-popover">Logout</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Scrollable page content -->
                    <div class="page-content list-block pull-to-refresh-content" id="homePgCntnt">
                        <!-- Default pull to refresh layer-->
                        <div class="content-block">
                            <div class="pull-to-refresh-layer">
                                <div class="preloader"></div>
                                <div class="pull-to-refresh-arrow"></div>
                            </div>
                            <div style="padding-bottom: 10px; padding-top: 40px">
                                <div class="content-block-title">YOUR ALBUMS</div>
                                <div class="card">
                                    <div class="card-content">
                                        <div class="list-block">
                                            <ul id="albumListContain">
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="content-block-title">ALBUMS YOU ARE IN</div>
                                <div class="card">
                                    <div class="card-content">
                                        <div class="list-block">
                                            <ul id="URN_albumListContain">
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div id="debugBox">
                                    <!--DEBUG-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Album page -->
                <div data-page="album" class="page cached">
                    <!-- Top Navbar-->
                    <div class="navbar">
                        <div class="navbar-inner navbar-fixed">
                            <div class="left">
                                <a href="#home" class="link icon-only"><i class="icon icon-back back"></i></a>
                            </div>
                            <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                            <div class="center sliding">PhotoDrop</div>
                        </div>
                    </div>
                    <!-- Speed Dial Wrap -->
                    <div class="speed-dial">
                        <!-- FAB inside will open Speed Dial actions -->
                        <a href="#" class="floating-button color-amber">
                            <!-- First icon is visible when Speed Dial actions are closed -->
                            <i class="icon icon-plus"></i>
                            <!-- Second icon is visible when Speed Dial actions are opened -->
                            <i class="icon icon-close"></i>
                        </a>
                        <!-- Speed Dial Actions -->
                        <div class="speed-dial-buttons">
                            <!-- First Speed Dial button -->
                            <a href="#" class="close-speed-dial color-amber" onclick="getImage()">
                                <i class="material-icons">collections</i>
                            </a>
                            <!-- Second Speed Dial button -->
                            <a href="#" class="close-speed-dial color-amber" onclick="takeImage()">
                                <i class="material-icons">photo_camera</i>
                            </a>
                            <!-- Third Speed Dial button -->
                            <a href="#" class="close-speed-dial color-amber" onclick="">
                                <i class="material-icons">videocam</i>
                            </a>
                        </div>
                    </div>
                    <!-- Scrollable page content -->
                    <div class="page-content list-block hide-navbar-on-scroll pull-to-refresh-content" id="albumPgCntnt" data-ptr-distance="50"
                        style="user-select: none;">
                        <div class="content-block">
                            <div class="pull-to-refresh-layer">
                                <div class="preloader"></div>
                                <div class="pull-to-refresh-arrow"></div>
                            </div>

                            <div class="content-block-title" id="album_name_ttl" style="margin:0">YOUR ALBUM NAME</div>
                            <div id="cont_file_input" class="item-content" style="display:none;">
                                <div class="item-inner">
                                    <div class="item-input left">
                                        <input type="file" id="inputfile" multiple/>
                                    </div>
                                </div>
                                <a href="#" onclick="DEV_uploadPics()" class="button button-raised button-fill color-yellow right">upload</a>
                            </div>
                            <!--<p class="buttons-row">-->
                            <!--<a href="#" onclick="iGotTheSauce()" class="button button-raised button-fill color-red">More Sauce!</a>-->
                            <!--<a href="#" class="button button-raised button-fill color-indigo" onclick="photoSwiper()">Swipe media</a>-->
                            <!--</p>-->
                        </div>
                        <div class="list-block" id="inner-body">
                            <!--Rows of photos are placed here by the code-->
                        </div>
                    </div>
                </div>

                <!-- User Profile page -->
                <div data-page="user-profile" class="page cached">
                    <!-- Top Navbar-->
                    <div class="navbar">
                        <div class="navbar-inner navbar-fixed">
                            <div class="left">
                                <a href="#" class="link icon-only back"><i class="icon icon-back"></i></a>
                            </div>
                            <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                            <div class="center sliding"></div>
                        </div>
                    </div>
                    <a href="#edit-profile" id="editProfBtn" class="floating-button color-amber">
                        <i class="icon material-icons">edit</i>
                    </a>
                    <!-- Scrollable page content -->
                    <div class="page-content list-block hide-navbar-on-scroll">
                        <div id="profCB" class="content-block list-block inset" style="text-align: center;">

                        </div>
                    </div>
                </div>

                <!--Edit Profile Page-->
                <div data-page="edit-profile" class="page cached">
                    <!-- Top Navbar-->
                    <div class="navbar">
                        <div class="navbar-inner navbar-fixed">
                            <div class="left">
                                <a href="#" class="link icon-only back"><i class="icon icon-back"></i></a>
                            </div>
                            <!-- We need cool sliding animation on title element, so we have additional "sliding" class -->
                            <div class="center sliding">Edit Profile</div>
                        </div>
                    </div>
                    <!--Page Content-->
                    <div class="page-content list-block">
                        <div class="content-block list-block inset">
                            <form id="profile_form">
                                <ul>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title floating-label">Email</div>
                                            <div class="item-input">
                                                <input type="email" id="profile-eml" name="email">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title floating-label">Username</div>
                                            <div class="item-input">
                                                <input type="text" id="profile-unm" name="username">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title floating-label">Password</div>
                                            <div class="item-input">
                                                <input type="password" id="profile-pswrd" name="password">
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                            </form>
                        </div>
                    </div>
                    <!-- Toolbar has additional "toolbar-bottom" class -->
                    <div class="toolbar toolbar-bottom">
                        <a href="#" id="update_link" class="link" style="float:right">Update</a>
                    </div>
                </div>

                <!--User Search Page-->
                <div data-page="user-search" class="page cached">
                    <!-- Search Bar -->
                    <form id="user-search-bar" class="searchbar">
                        <div class="searchbar-input">
                            <input type="search" placeholder="Search by username">
                            <a href="#" class="searchbar-clear"></a>
                        </div>
                        <a href="#" class="searchbar-cancel">Cancel</a>
                    </form>

                    <div class="page-content">
                        <!--<div style="display:none"></div>-->
                        <!-- This block will be displayed if nothing found -->
                        <div class="content-block searchbar-not-found">
                            <div class="content-block-inner">No users found</div>
                        </div>

                        <!-- This block will be displayed if anything found, and this list block is used a searbar target -->
                        <div class="list-block list-block-search searchbar-found" id="userSearchLB">
                            <ul>
                            </ul>
                        </div>
                    </div>
                    <!-- Toolbar has additional "toolbar-bottom" class -->
                    <div class="toolbar toolbar-bottom">
                        <a href="#" id="clear_link" class="link" onclick="clearSearch()" style="float:right">Clear</a>
                        <a href="#home" id="back_link" class="link back" style="float:left">Back</a>
                    </div>
                </div>

                <!--Friends Page-->
                <div data-page="friends" class="page cached">
                    <!-- Search Bar -->
                    <!-- <form id="friend-searchbar" class="searchbar">
                        <div class="search-input">
                            <input type="search" placeholder="Search friends">
                            <a href="#" class="searchbar-clear"></a>
                        </div>
                        <a href="#" class="searchbar-cancel">Cancel</a>
                    </form> -->

                    <!-- Search Bar overlay -->
                    <!-- <div class="searchbar-overlay"></div> -->

                    <div class="page-content">
                        <!--<div style="display:none"></div>-->
                        <!-- This block will be displayed if nothing found -->
                        <div class="content-block searchbar-not-found">
                            <div class="content-block-inner">No users found</div>
                        </div>

                        <div class="content-block-title">Requests</div>
                        <div class="list-block">
                            <ul id="friendReqs-list-block">
                            </ul>
                        </div>

                        <div class="content-block-title">Friends</div>
                        <div class="list-block list-block-search searchbar-found">
                            <ul id="friends-list-block">
                            </ul>
                        </div>
                    </div>
                    <!-- Toolbar has additional "toolbar-bottom" class -->
                    <div class="toolbar toolbar-bottom">
                        <a href="#" id="clear_link" class="link" onclick="clearSearch()" style="float:right">Clear</a>
                        <a href="#" id="back_link" class="link back" style="float:left">Back</a>
                    </div>
                </div>


            </div>
        </div>
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="lib/framework7/js/framework7.min.js"></script>

    <!--TEMPLATES-->
    <script type="text/template7" id="albumListTmplt">
        {{#each album}}
        <li class="swipeout">
            <input type="hidden" value="{{_id.$oid}}">
            <a href="#" class="item-link item-content" onClick="goToAlbumPg('{{title}}', '{{_id.$oid}}')">
                <div class="item-inner">
                    <div class="item-title">{{title}}
                        <!--<div class="time-stamp">{{creation.date}}</div>-->
                    </div>
                </div>
            </a>
            <div class="swipeout-actions-right">
                <!-- We add data-close-on-cancel attribute to close swipeout automatically -->
                {{#if ../flag}}
                <a href="#" class="swipeout-delete" data-confirm="Are you sure want to delete the album <b>{{title}}</b>?" data-confirm-title="Delete?"
                    data-close-on-cancel="true">Delete</a> {{else}}
                <a href="#" class="swipeout-delete" data-confirm="Are you sure want to remove yourself from the album <b>{{title}}</b>?"
                    data-confirm-title="Remove?" data-close-on-cancel="true">Remove</a> {{/if}}
            </div>
            {{/each}}
        </li>
    </script>

    <script type="text/template7" id="userListTmplt">
        <a href="#user-profile?nickname={{name}}&id={{id}}" class="item-link item-content">
            <div class="item-inner">
                <div class="item-title" style="width: 100%;">{{name}}</div>
            </div>
        </a>
    </script>

    <script type="text/template7" id="profTmplt">
        <div style="font-size:25px">{{name}}</div>
        <div id="profilePic"></div>
        <div>Member since <b>{{memDate}}</b></div>
        {{#js_compare "this.netstat != 'OWN'"}} {{#js_compare "this.netstat == 'PEN'"}} <a href="#" class="button button-fill button-raised color-orange"
            disabled>Pending Request</a> {{else}} {{#js_compare "this.netstat == 'CON'"}} <a href="#" class="button button-fill button-raised color-green"
            onclick="connect('{{id}}')">Connect</a> {{else}} <a href="#" class="button button-fill button-raised color-red" onclick="disconnect('{{id}}')">Disconnect</a>        {{/js_compare}} {{/js_compare}} {{else}} {{/js_compare}}
    </script>

    <script type="text/template7" id="friendListTmplt">
        {{#each friends}}
        <a href="#user-profile?nickname={{name}}&id={{id.$oid}}" class="item-link item-content">
            <div class="item-inner bg-grey">
                <div class="item-title friend-name" style="width: 100%;">{{name}}</div>
            </div>
        </a>
        {{else}}
        <li class="item-content">
            <div class="item-inner">
                <div class="item-title" style="width: 100%;">No friends</div>
            </div>
        </li>
        {{/each}}
    </script>

    <script type="text/template7" id="friendReqTmplt">
        {{#each friendReqs}}
        <li class="swipeout">
            <a href="#user-profile?nickname={{name}}&id={{id.$oid}}" class=" swipeout-content item-content">
                <div class="item-inner">
                    <div class="item-title friend-name" style="width: 100%;">{{name}}</div>
                </div>
            </a>
            <div class="swipeout-actions-left">
                <a href="#" onclick="acceptReq('{{id.$oid}}')" class="swipeout-delete bg-green">Accept</a>
            </div>
            <div class="swipeout-actions-right">
                <a href="#" onclick="declineReq('{{id.$oid}}')" class="swipeout-delete bg-red">Decline</a>
            </div>
        </li>
        {{else}}
        <li class="item-content">
            <div class="item-inner">
                <div class="item-title" style="width: 100%;">No friend requests</div>
            </div>
        </li>
        {{/each}}
    </script>


    <script type="text/javascript" src="lib/load-image.all.min.js"></script>
    <script type="text/javascript" src="lib/helper_funcs.js"></script>
    <script type="text/javascript" src="lib/dom7.js"></script>
    <script type="text/javascript" src="lib/md5.js"></script>
    <script type="text/javascript" src="lib/validate.min.js"></script>

    <script type="text/javascript" src="js/load-scripts.js"></script>

</body>

</html>